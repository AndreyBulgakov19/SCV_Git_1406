# Работа с Git
## 1. Проверка наличия установленного Git

 В терминале выполнить команду `git version`

 Если git установлен появиться сообщение с информацией о версии проогораммы. Иначе будетсообщение об ошибке. 
## 2. Установка Git
Загружаем последнюю версию Git с сайта   https://git-scm.com/downloads.
Устанваливаем с настройками по умолчанию.

## 3. Настройка Git
При первом использовнии Git нужно представиться. Для этого нужно ввести в терминале две команды :
```
git config --global user.email "you@example.com" 
git config --global user.name "Your Name" 
```

## 4. Создание репозитория 
Получить репозитарии можно 2 способами.

1. Создайте на рабочем столе папку под названием instruction.
Через меню-файл-открыть папку или через значок на боковой панели.
Чтобы создать новый репозиторий, нам нужно открыть терминал, зайти в папку нашего проекта и выполнить команду 
```
git init
```
Для этого в окне терминала введите: git init
Это включит приложение в этой конкретной папке и создаст скрытую директорию .git, где будет храниться история репозитория и настройки.
2. Клонировать существующий репозиторий из любого места. Сделать это можно так:
```
git clone адрес дипозитория
```
## 5. Определение состояния
```
git status 
```
 это еще одна важнейшая команда, которая показывает информацию о текущем состоянии репозитория: актуальна ли информация на нём, нет ли чего-то нового, что поменялось, и так далее. Запуск git status на нашем свежесозданном репозитории должен выдать:

On branch master

No commits yet

nothing to commit (create/copy files and use "git add" to track)


Сообщение говорит о том, что файл git instruction.md неотслеживаемый. Это значит, что файл новый и система еще не знает, нужно ли следить за изменениями в файле или его можно просто игнорировать. Для того, чтобы начать отслеживать новый файл, нужно его специальным образом объявить.

## 6. Создание файла

Cоздайте файл Git instruction.md и сохраните его в директории instruction.
Далее вводим команду 
```
git status 
```
получим следуюшее сообщение

On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)
   Git instruction.md
   nothing added to commit but untracked files present (use "git add" to track)

   
Так же рекомендуется включить автосохранение документа - 

Файл-Автосохранение

## 7. Добавление файла в отслеживание.
Каждый файл в рабочей папке может находиться в одном из двух состоянии:
Под *версионном контроле* (отслеживаемы Tracked)
и нет (неотслеживаемы Untracked)
Отслеживаемые файлы могут быть неизмененными, измененными или подготовленными к коммиту.
Чтобы посмотреть состояние файлов в репозитории необходимо выполнить команду:
```
git status
```
## 8. Запись изменений в репозиторий
Для того, чтобы начать отслеживать новый файл пользуемся командой git add коммитим все нужное в репозиторий (создаем слепок нужного нам состояния).
Для этого вводим 
```
git add "имя нашего файла с расширением"
```
Можно ввести первые буквы имени файла и нажать клавишу TAB для автозаполнения.
Далее фиксируем изменения в репозитории путем введения команды :
```
git commit --m "Наш комментарии"
```

Есть несколько ключей, упрощающих работу с git commit:
```
git commit -a "commit message"
```
совершит коммит, автоматически индексируя изменения в файлах проекта. Новые файлы при этом индексироваться не будут! Удаление же файлов будет учтено.

Команда:
```
git commit --amend "commit message"
```
 это удобный способ изменить последний коммит. Она позволяет объединить проиндексированные изменения с предыдущим коммитом без создания нового коммита. Её можно использовать для редактирования комментария к предыдущему коммиту без изменения состояния кода в нем. Но такое изменение не только редактирует последний коммит, но и полностью его заменяет. То есть измененный коммит станет новой сущностью с отдельной ссылкой.

```
git commit -am "commit message"
```

Команда для опытных пользователей с параметрами -a и -m. Эта комбинация параметров создает коммит всех проиндексированных изменений и добавляет к коммиту подставленный комментарий.

**Как сравнивать изменения в Git.**

Для вывода изменений в файлах по сравнению с последним коммитом, используется git diff без параметров:
```
git diff
```

Команда выводит изменения в файлах, которые еще не были добавлены в индекс. Сравнение происходит с последним коммитом.

Чтобы сравним два коммита, то в качестве первого аргумента команде git diff указывается хеш первого коммита, а вторым аргументом хеш второго коммита, например:
```
git diff 4612297 5e356cf
```

**Сравнение двух веток:**

Для вывода всех изменений между концами двух веток, необходимо для git diff указать имена веток:
```
git diff branch1 branch2
```
**Сравнение файлов между двумя ветками**

Чтобы сравнить конкретные файлы между двумя ветками используется команда:
```
git diff branch1 branch2 ./myfile.cpp
```

Вместо branch1, branch2 нужно указать название веток, а вместо myfile.cpp путь до сравниваемого файла. Через пробел можно добавить еще файлы для сравнения.

Кроме того, команда git diff имеет специальный режим подсветки изменений добавленные и удаленные строки зеленым и красным цветоом соотвественно.


## 9. Просмотр истории коммитов.

Для просмотра истории коммитов используется команда 
```
git log
```
По умолчанию, без аргументов, git log выводит список коммитов созданных в данном репозитории в обратном хронологическом порядке. То есть самые последние коммиты показываются первыми. Как вы можете видеть, эта команда отображает каждый коммит вместе с его контрольной суммой SHA-1, именем и электронной почтой автора, датой создания и комментарием
Для, чтобы вывести список коммитов и их идентификаторы:
```
git log --oneline
```
данная команда выводит каждый коммит в одну строку, что удобно если вы просматриваете большое количество коммито
```
git log --graph 
```
выводит дерево зависимостей для всех коммитов

![example](2022-06-12_09-40-04.jpg)



Для переключения между коммитами можно использовать команду:
```
git checkout <commit> -- <filename>
```
Эта команда откатывает выбранный файл к состоянию в более ранней версии указанного коммита. Отменённые изменения будут в рабочей директории, и их можно будет закоммитить как угодно

## 10. Работа с изображениями.

Вначале изображение помещаем в папку, в который мы сейчас работаем.
Вводим команду:
```
![комментарии] (namefoto.jpg)
```

Потом перемещаем namefoto.jpg  в файл  . gitignore
Далее нужно закоммитить этот файл:
```
Git add .gitignore 
```
```
Git commit – m “massege”
```

## 11. Работа  с ветками

Ветка в Git это подвижный указатель на один из коммитов. Обычно ветка указывает на последний коммит в цепочке коммитов. Ветка берет свое начало от какого-то одного коммита. 

**Создание.**

Просто сделать ветку, не переключаясь на нее можно командой
```
git branch "имя ветки"
```
В результате создаётся новый указатель на текущий коммит.

Посмотреть все ветки можно с помощью команды:
```
git branch
 ```
 ![tak](branches.jpg)

 **Переключение веток:**

Для переключения на существующую ветку выполните команду:
```
git checkout "имя ветки"
```
Важно понимать, что ветка берет свое начало не от ветки, а от последнего коммита который находиться в той ветке, в которой вы находились.

**Слияние веток.**

Выполнить слияние веток для включения изменений в текущую ветку можно с помощью команды:
```
git merge  "имя ветки" 
```

В merge коммите содержатся две ссылки на два коммита которые объединяются в одну ветку.
После того, как ветка объединяется с другой веткой, все коммиты сделанные в ней, попадают в ветку, с которой она была объединена. Так же важно понимать, что merge это не двунаправленная операция. Если смержить ветку задачи в мастер ветку, то в мастер ветке появится код, который находился в ветке задачи, а в ветке задачи не появиться новый код из мастер ветки. 

**Конфликты.**

Конфликты возникают при мердже веток, если в этих ветках одна и та же строка кода была изменена по-разному. Тогда получается, что Git не может сам решить какое из изменений нужно применить, и он предлагает вручную решить эту ситуацию.

![conflikt](conflikt.jpg)

**Удаление.**

После объединения веток, можно удалить, ту которая нам больше не нужна.
Для удаления ветки выполните команду:
```
git branch с параметром -d "имя ветки"
```
но удаление возможно, только после слияния.

Принудительное удаление ветки
```
git branch с параметром -D "имя ветки"
```

**Журнал ccылок.**

Справочные журналы (reflog) — это механизм, который используется в Git для регистрации обновлений, применяемых к концам веток и другим ссылкам на коммиты. Reflog позволяет вернуться к коммитам, даже если на них нет ссылок из какой-либо ветки или метки. После перезаписи истории reflog содержит информацию о старом состоянии веток и позволяет при необходимости вернуться к этому состоянию. Каждый раз при обновлении конца ветки любым способом (переключение веток, загрузка новых изменений, перезапись истории или просто добавление новых коммитов) в reflog добавляется новая запись.

```
git reflog
```
 ## 12. Игнорирование файлов.

Git рассматривает каждый файл в вашей рабочей копии, как файл одного из трех нижеуказанных типов:
1.	Отслеживаемый файл — файл, который был предварительно проиндексирован или зафиксирован в коммите.
2.	Неотслеживаемый файл — файл, который *не был* проиндексирован или зафиксирован в коммите.
3.	Игнорируемый файл — файл, явным образом помеченный для Git как файл, который необходимо игнорировать.

Игнорируемые файлы отслеживаются в специальном файле .gitignore, который регистрируется в корневом каталоге репозитория путем создания файла:
.gitignore


Дальше перемещаем файл, который необходимо игнорировать в .gitignore. После этого все файлы, находящиеся там будут игнорироваться. 
Далее нужно закоммитить этот файл:
```
Git add .gitignore 
```
```
Git commit – m "massege"
```
## 13. Команды.

*Конфигурация*

git config --global user.name "[name]" — установить имя, которое будет прикрепляться к коммиту.

git config --global user.email "[email address]" — установить email, который будет прикрепляться к коммиту.

git config --global color.ui auto — включить полезную подсветку командной строки.

*Создание репозиториев*

git init [project-name] — создать новый локальный репозиторий с заданным именем.

*Работа с изменениями*

git status — полный список изменений файлов, ожидающих коммита.

git status -s — краткий вид изменений.

git diff — показать изменения в файлах, которые еще не были добавлены в индекс коммита (staged).

git add . — сделать все измененные файлы готовыми для коммита.

git add '*.txt' — добавить только файлы, соответствующие указанному выражению.

git commit — записать изменения в репозиторий. для написания сообщения откроется назначенный редактор.

git commit -m "[descriptive message]" — записать изменения с заданным сообщением.

git commit --amend — добавить изменения к последнему коммиту.

*Просмотр истории*

git log — список изменения текущей ветки;

git log --oneline — выводит сокращённые данные коммита (в виде одной строки);

git log --graph выводит дерево зависимостей для всех коммитов;

git show [commit] — показать метадату и изменения в заданном коммите.

*Отмена подготовленных и неподготовленных изменений*

git checkout [filename] — вернуть файл в первоначальное состояние если он еще не был добавлен в индекс коммита.

git checkout master — возвращает в ту версию в которой работаем =Q

git reflog - журнал ссылок 
## 14. Работа с удалёнными репозиториями
 **1. Регистрация на Github**

Удалённые репозитории представляют собой версии вашего проекта, сохранённые в интернете или ещё где-то в сети. У вас может быть несколько удалённых репозиториев, каждый из которых может быть доступен для чтения или для чтения-записи. Доступ к репозиторию на таком сервере может осуществляться по интернету или по локальной сети.
Удалённый репозиторий – полноценный репозиторий, ничем не отличающийся от локального. У него есть собственные ветки, собственный указатель HEAD, своя история коммитов и так далее.
Взаимодействие с другими пользователями предполагает управление удалёнными репозиториями, а также отправку и получение данных из них. Управление репозиториями включает в себя как умение добавлять новые, так и умение удалять устаревшие репозитории, а также умение управлять различными удалёнными ветками, объявлять их отслеживаемыми или нет и так далее.
На сайте https://github.com/ создаём аккаунт.

**2. Создание нового репозитория**

Можем создать новый репозиторий нажав + new repository

Вводим имя. 

Он может быть Public и Private.

Далее нажимаем кнопку Create repository.
У нас появляется список действий, которые можно сделать:
```
…or create a new repository on the command line
echo "# home" >> README.md
git init
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin https://github.com/Nataliaada/home.git
git push -u origin main
```
```
…or push an existing repository from the command line
git remote add origin https://github.com/Nataliaada/home.git
git branch -M main
git push -u origin main
```
```
…or import code from another repository
You can initialize this repository with code from a Subversion, Mercurial, or TFS project.
```
**3. Привязка репозиториев**

Теперь мы можем отправить существующий удаленный репозиторий в существующий  локальный репозиторий.
Для этого нужно сделать привязку локального и удалённого репозитория

Открываем локальную папку и создаем файл.
Выполняем: 
```
Git init
```
```
Git add . 
```
```
Git commit – m “massege”
```
Если мы хотим отправить удаленный репозиторий на локальный репозиторий
```
git remote add origin https://github.com/Nataliaada/home.git
```
Необходимо переименовать локальную ветку в ветку main
```
git branch – M  Main
```
и отравить на удаленный репозиторий
```
git push – U origin main
```
и у нас появиться файл из удаленного репозитория.
Мы можем вносить изменения в удаленном репо, при этом  оставляем комментарии и нажимаем **commit changes**.
Если мы хотим, чтобы внесённые изменения появились у нас в локальном репозитории нужно ввести команду :
```
git pull 
```
Эта команда позволяет автоматически получить изменения из удалённой ветки и слить их со своей текущей. И все изменения у нас отобразятся, если не было никаких изменений в локальном репозитории.

**4. Клонирование.**

В своём аккаунте на github.com можем найти интересующий нас репозиторий через окно поиска, заходим в него и делаем FORK к себе в удалённый репозиторий.
У нас создаётся копия этого репозитория. С ним можно работать. 
Для этого во складке CODE копируем адрес ссылки, переходим в локальный репозиторий. Создаём локальную папку. Открываем ее в VS и в терминале вводим
```
git clone “сылка на удаленный репозиторий”
```
По умолчанию команда git clone автоматически настраивает вашу локальную ветку master на отслеживание удалённой ветки master на сервере, с которого вы клонировали репозиторий. Название веток может быть другим и зависит от ветки по умолчанию на сервере. 
Так же можно присвоить новое имя папки:
```
git clone “сылка на удаленный репозиторий” newname
```
Переходим в папку путем введения комманды:
```
Cd имя папки
```
Далее создаём новую ветку:
```
Git branch newname
```
Переходим в нее:
```
Git checkout newname
```
Теперь можно вносить все изменения в этой ветке.
Далее внесённые изменения коммитим:
```
Git add.
```
```
Git commit –m “message”
```
**5. Отправка изменений в удалённый репозиторий (Push)**

Когда вы хотите поделиться своими наработками, вам необходимо отправить их в удалённый репозиторий. Команда для этого действия простая: 
```
git push 
```
Чтобы отправить вашу ветку new на сервер origin (повторимся, что клонирование обычно настраивает оба этих имени автоматически), вы можете выполнить следующую команду для отправки ваших коммитов:
```
 git push – U origin newname
```
это команда говорит о том что у вас ветки new не было на удаленном репозитории и предлагает вам ее добавить.
Эта команда срабатывает только в случае, если вы клонировали с сервера, на котором у вас есть права на запись, и если никто другой с тех пор не выполнял команду push. Если вы и кто-то ещё одновременно клонируете, затем он выполняет команду push, а после него выполнить команду push попытаетесь вы, то ваш push точно будет отклонён. Вам придётся сначала получить изменения и объединить их с вашими и только после этого вам будет позволено выполнить push. 

После выполнения команды PUSH заходим на Github и у нас появляется кнопка 
```
compare&pull request
```
отправляем наши изменения автору репозитория с комментарием. Он может либо принять, либо отправить нам сообщение со своими комментариями.

**6. Просмотр удалённых репозиториев**

Для того, чтобы просмотреть список настроенных удалённых репозиториев, вы можете запустить команду 
```
git remote
```
Она выведет названия доступных удалённых репозиториев. Если вы клонировали репозиторий, то увидите, как минимум origin — имя по умолчанию, которое Git даёт серверу, с которого производилось клонирование.

Чтобы просмотреть адреса для чтения и записи, привязанные к репозиторию:
```
git remote -v
```
